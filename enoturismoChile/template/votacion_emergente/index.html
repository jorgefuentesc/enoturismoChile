{% extends 'index.html' %}
{% load static %}

{% block contenido %}



{% block modal %}
{% include 'modal/mdl-vista_vinna.html' %}
{% endblock modal %}




<form id="envio_formulario">
  {% csrf_token %}
  <div id="contenedor-vinnas" name="contenedor-vinnas">

  </div>


  <br>
  <br>
  <br>
  <div>

      <div class="row" style="margin: 7%">
    <div class="col-md-6">

      <h1 class="col-md-12 titulo_form " >Para enviar tu votación debes completar los siguientes datos</h1>
      <div style="text-align: center;">
        <img src="{% static 'img/logo-votacion.PNG' %}" alt="">
      </div>
    </div>
    <div class="col-md-6">
      <div class="card confirmation-form formulario-fondo col-md-12 col-lg-12">
        <div class="card-body">
          <h3 class="card-title titulo_encabezado_form">Ingresa tus datos</h3>
          <br>
          <div class="form-group ">
            <label class="titulo_input" for="documento">CI o Pasaporte:</label>
            <input type="text" class="form-control formulario-input " required oninput="checkRut(this)" id="documento" placeholder="XXXXXXXX-X">
            <label id="label-error" style="color: red;" hidden>Ingrese un run valido</label>
          </div>
          <div class="form-group ">
            <label class="titulo_input" for="correo">Nombre:</label>
            <input type="text" class="form-control formulario-input" id="nombre" placeholder="ejemplonombre">
            
          </div>
          <div class="form-group ">
            <label class="titulo_input" for="correo">Correo Electrónico:</label>
            <input type="email" class="form-control formulario-input" id="correo" placeholder="ejemplo@correo">
          </div>
          <br>
          <div class="text-center ">
            <button class="btn-enviar" type="submit">
              <h4 style="letter-spacing: 0.75px;
                color: #F4C2A6;
                opacity: 1;">Enviar Votación</h4>
            </button><br>
            <label id="error_envio" style="color: red;" hidden>Ingrese un run valido</label>
            <!-- <a href="https://premiosenoturismochile.cl/votacion-exitosa/"> <label class="label_enviar"></label></a>
                <a class="btn btn-primary">Enviar Votación</a> -->
          </div>
        </div>
  
      </div>
    </div>

  </div>
</form>









{% endblock contenido %}


{% block script %}

<script>
  
  function checkRut(rut) {
    var valor = rut.value.replace('.','');
    valor = valor.replace('-','');
    cuerpo = valor.slice(0,-1);
    dv = valor.slice(-1).toUpperCase();
    rut.value = cuerpo + '-'+ dv
    if(cuerpo.length < 7) { rut.setCustomValidity("RUT Incompleto"); return false;}
    suma = 0;
    multiplo = 2;
    for(i=1;i<=cuerpo.length;i++) {
        index = multiplo * valor.charAt(cuerpo.length - i);
        
        suma = suma + index;
        if(multiplo < 7) { multiplo = multiplo + 1; } else { multiplo = 2; }
  
    }
    dvEsperado = 11 - (suma % 11);

    dv = (dv == 'K')?10:dv;
    dv = (dv == 0)?11:dv;
  
    if(dvEsperado != dv) { rut.setCustomValidity("RUT Inválido"); return false; }
    
    rut.setCustomValidity('');
}
</script>

{% endblock script %}